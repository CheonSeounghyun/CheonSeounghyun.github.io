---
layout: post
date: 2023-12-11
title: "MongoDB 샤드 클러스터 구성"
published: true
lang: ko
excerpt: MongoDB의 샤드 클러스터 구성을 알아보고 구현해 봅니다
tags: NoSQL MongoDB
author: seounghyun
---

## Sharding(샤딩)
대표적인 NoSQL인 MongoDB는 샤딩을 지원하고 있습니다. 샤딩은 여러 시스템에 데이터를 분할하여 배포하는 방법입니다. MongoDB는 샤딩을 사용하여 매우 큰 데이터 처리와 높은 처리량이 포함된 배포를 지원합니다.

MongoDB는 샤딩을 통한 수평 확장을 지원합니다. 수평 확장이란, 시스템 데이터를 여러 서버로 나누고, 필요에 따라 서버를 추가하여 용량을 늘리는 작업입니다. 단일 시스템의 전체 속도나 용량은 높지 않지만, 각 시스템은 전체 작업 부하의 하위 집합을 처리하므로 단일 고속 대용량 서버보다 더 나은 효율성을 제공할 수 있습니다. 필요에 따라 서버를 추가하기만 하면 되기 때문에 단일 시스템의 고급 하드웨어보다 전체 비용이 낮을 수 있습니다. 대신 인프라 및 유지 관리의 복잡성이 증가할 수 있습니다.

![alt]({{ "/assets/2023-12-11-MongoDB-샤드-클러스터-구성/sharded-cluster-production-architecture.bakedsvg.svg" | absolute_url}}){: .center-image }

그림 1. MongoDB 샤드 클러스터 구조
{: style="text-align: center; font-style: italic;"}

- MongoDB 샤드 클러스터의 구성 요소
  1. shard : 샤딩된 데이터의 하위 집합
  2. mongos : mongos 클라이언트 어플리케이션과 샤딩된 클러스터 간의 인터페이스 제공 역할을 하는 쿼리 라우터
  3. config : 클러스터에 대한 메타데이터 및 구성 설정을 저장

## 샤딩의 장점
### 읽기/쓰기
MongoDB는 샤드 클러스터의 샤드 전체에 읽기 및 쓰기 작업을 분산하여 각 샤드가 클러스터 작업의 하위 집합을 처리할 수 있게 합니다. 더 많은 샤드를 추가하면 읽기 및 쓰기 작업을 클러스터 전체에서 수평으로 확장할 수 있습니다.

### 저장 용량
샤딩은 클러스터의 샤드 전체에 데이터를 분산하여 각 샤드에 전체 클러스터 데이터의 하위 집합을 포함할 수 있게 구성됩니다.

### 고가용성
만약 하나 이상의 샤드 복제본이 사용할 수 없게 되더라도 샤딩된 클러스터는 계속 읽기 및 쓰기를 수행할 수 있습니다. 사용할 수 없는 샤드의 데이터에는 액세스 할 수 없지만, 사용 가능한 샤드에 대한 데이터 읽기 쓰기는 가능합니다.